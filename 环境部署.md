## 00 连接Orin平台
```bash
ssh agx@192.168.1.109 #password123456
```
## 01 下载SDK
- SDK下载地址：https://github.com/unitreerobotics/unitree_sdk2
- 下载 unitree_sdk2 压缩包并解压至用户主目录。打开一个终端，并依次执行下列命令
```bash
cd ~/unitree_sdk2/
mkdir build
cd build
cmake ..
sudo make install
```
![image](https://github.com/user-attachments/assets/569b11f5-9d3f-49a1-a063-e29ea3497877)
## 02 局域网配置
- 用网线的一端连接B2机器人，另一端连接用户电脑，并开启电脑的 USB Ethernet 后进行配置
- 机器狗机载电脑的 IP 地地址为 192.168.123.161，故需将电脑 USB Ethernet 地址设置为与机器狗同一网段，如192.168.123.222;
- ifconfig命令查看123网段的网卡名字

![image](https://github.com/user-attachments/assets/282b7b7e-389f-4535-99fc-6e8c88502401)
## 03 运行轮足运控例程
- 打开一个终端，并依次执行下列命令以运行例程。
- 注：第二行命令中的"eth0"字符串需要用户自行替换为用户电脑中对应于123网段的网卡名字。
```bash
cd ~/unitree_sdk2/build/bin
sudo ./b2w_stand_example eno1
```
## 04 unitree_sdk2_python
- 4.0依赖环境（pip install opencv-python)
```bash
python>=3.8
cyclonedds==0.10.2
numpy
opencv-python
```
- 4.1下载并编译cyclonedds==0.10.2
```bash
mkdir unitree_pkgs
cd unitree_pkgs
git clone https://github.com/eclipse-cyclonedds/cyclonedds -b releases/0.10.x 
cd cyclonedds && mkdir build install && cd build
cmake .. -DCMAKE_INSTALL_PREFIX=../install -DBUILD_DDSPERF=OFF
cmake --build . --target install
```
- 4.2下载并编译unitree_sdk2_python
- 进入 unitree_sdk2_python 目录，设置 CYCLONEDDS_HOME 为刚刚编译好的 cyclonedds 所在路径，再安装 unitree_sdk2_python
```bash
cd ..
cd ..
git clone https://github.com/unitreerobotics/unitree_sdk2_python.git
cd unitree_sdk2_python
export CYCLONEDDS_HOME="//home/agx/disk/unitree_pkgs/cyclonedds/install"
pip3 install -e .
```
-4.3 Python接口DDS通讯
```bash
#在终端中执行：
python3 ./example/helloworld/publisher.py
#打开新的终端，执行：
python3 ./example/helloworld/subscriber.py
```
![image](https://github.com/user-attachments/assets/db6ac5a5-3805-4cba-b84e-7274784fcea8)

-4.4 高层运动控制【此部分由于B2W型号不同，与原本tutorial有区别】
```bash
python3 ./example/b2w/high_level/b2w_sport_client.py eno1  #eno1为测试PC中的网卡名称
```

## 05 unitree_sdk2_slam安装 
- 在终端输入以下指令下载测试例程并解压，执行脚本文件进行安装
- 由于缺少激光雷达，无法测试例程？
```bash
wget https://unitree-firmware.oss-cn-hangzhou.aliyuncs.com/tool/ros2_idl_install.zip
unzip ros2_idl_install.zip
cd unitree_slam
sudo ./install.sh   #执行脚本文件

#编译
mkdir build
cd build
cmake ..
make

#检测雷达通讯是否正常&运行例程
sudo ./rslidar_dds_test eno1  #eno1为测试PC中的网卡名称
sudo ./demo_b2 eno1
```

## Debug
- 1、libddsc.so.0:file too short
- 解决方案：不知道什么鬼问题，应该是软链接出问题了，找了好多blogs，重新做一下软连接应该就行了
- 进入thirdparty/lib/aarch64，删除掉现有的libddsc.so.0、libddscxx.so.0重新软连接
- [ps]神奇的是把所有编译的内容删掉重新下载编译竟然没有再次出现这个问题
```bash
cd thirdparty/lib/aarch64
rm libddsc.so.0
rm libddscxx.so.0
ln -s libddsc.so libddsc.so.0
ln -s libddscxx.so libddscxx.so.0
```
![image](https://github.com/user-attachments/assets/da9ee6de-34cc-49f1-8d09-a4b266a0db9b)

- 2、pip3 install -e . 遇到报错Could not locate cyclonedds. Try to set CYCLONEDDS_HOME or CMAKE_PREFIX_PATH
- 解决方案：该错误提示找不到 cyclonedds 路径。首先按照本文4.1编译安装cyclonedds。
- 之前还报了一个错pip install cyclonedds==0.10.2报错版本库中没有0.10.2（但其实里面明明就有），这个不知道是什么问题，重装系统之后直接好了

- 3、编译unitree_sdk2的时候遇到/home/agx/disk/unitree_sdk2/example/g1/low_level/g1_dual_arm_example.cpp:1:10: fatal error: yaml-cpp/yaml.h: 没有那个文件或目录的报错
```bash
  #include <yaml-cpp/yaml.h>
  ^~~~~~~~~~~~~~~~~
  compilation terminated.
```
![image](https://github.com/user-attachments/assets/d902d1aa-5a68-422b-b343-8e6af2b515c6)

- 解决方案：缺少libyaml，重新下载
```bash
sudo apt-get install libyaml-cpp-dev
```

- 4、slam安装时执行install脚本文件出现cp: 目标 '/usr/local/lib/aarch64' 不是目录
- 解决方案：其实可能并不需要，但是可以在/usr/local/lib文件夹下面新建aarch64即可，因为源代码里面有赋值操作

![image](https://github.com/user-attachments/assets/1b8c7a51-e041-419e-ac1d-5a42106d4cac)

- 5、无法进行编译？每次编译都直接报错找不到对应的文件：是/home/agx/disk/unitree_sdk2/example/b2w/b2w_sport_client.cpp
- 原先安装sdk2的时候就是安装在ddscxx里面的，并不是dds文件夹？

![image](https://github.com/user-attachments/assets/6afac0a3-e798-4352-a303-a93aefaf109d)
![image](https://github.com/user-attachments/assets/c0c09a58-f910-461d-9ea9-890a29f5f3b2)

```bash
sudo apt install gcc-9 g++-9
#使用update-alternatives命令配置多编译器版本
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-9 90 --slave /usr/bin/g++ g++ /usr/bin/g++-9
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-11 100 --slave /usr/bin/g++ g++ /usr/bin/g++-11
sudo update-alternatives --config gcc
```
